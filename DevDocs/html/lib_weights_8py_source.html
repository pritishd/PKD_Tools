<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>PKD_Tools: C:/Users/admin/Documents/maya/scripts/PKD_Tools/libWeights.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PKD_Tools
   </div>
   <div id="projectbrief">This first set of tools contains deformer weight APIs and GUI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('lib_weights_8py_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">C:/Users/admin/Documents/maya/scripts/PKD_Tools/libWeights.py</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespace_p_k_d___tools_1_1lib_weights.html">    1</a></span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"># @package PKD_Tools.libWeights</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"># @brief This package allows you to import/export weights of various deformers.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"># @details For a seamless import/export the following is assumed</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"># &lt;ol&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"># &lt;li&gt;The geometry is imported and not referenced. &lt;/li&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"># &lt;li&gt;The number of vertices on the geometry itself has not changed.&lt;/li&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"># &lt;li&gt;During export, the target geometry must be selected.&lt;/li&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"># &lt;li&gt;If there are existing deformers on the geometry, make sure their names are the same as the exported data so that correct weights are imported&lt;/li&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"># &lt;li&gt;If you want the deformer to be rebuilt ensure that the same deformer name does not exists in target/import scene. As a best practice, always rename your</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"># deformers in your source/export scene.&lt;/li&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"># &lt;/ol&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"># Current supported deformers are</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"># &lt;ul&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"># &lt;li&gt;SkinClusters&lt;/li&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"># &lt;li&gt;Clusters&lt;/li&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"># &lt;li&gt;Blendshapes&lt;/li&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"># &lt;/ul&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"># &lt;h3&gt;Weights/MultiWeights&lt;/h3&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"># Deals with exporting and importing the weight of the deformer on a target geometry. By default we use Maya native &lt;i&gt;deformerWeights&lt;/i&gt; command which</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"># exports out a XML file. However in the case of blendshapes this is not possible yet. (Maya limitation? Needs for exploration)</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"># With this, we save the hassle of reading the weights and exporting them as Maya does that for us. Similarly it takes care of the same on the import side.</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"># Furthermore this will ensure a smooth data transfer between different versions of Maya as hopefully Maya will take care of legacy compalitiy issues.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"># &lt;ul&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"># &lt;li&gt;Weights class deals with deformers which usually only has one iteration on a geometry eg skinCluster.&lt;/li&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"># &lt;li&gt;MultiWeights class deals with deformers where muliple instances of the geometry eg blendshapes and clusters&lt;/li&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"># &lt;/ul&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"># &lt;h4&gt;Data&lt;/h4&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"># In addition to the weights file this class would also gather data which will be useful in rebuilding the deformers eg the order of the clusters,</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"># whether it is a relative cluster, the joints used in the skinCluster etc.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"># &lt;h3&gt;Weightmanager&lt;/h3&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"># The WeightManager class works with multiple geometry at the same time. An xml file saves out the following information</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"># &lt;ol&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"># &lt;li&gt;the list of geometeries processed&lt;/li&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"># &lt;li&gt;Data(as explained before) about the deformers for each geometry&lt;/li&gt;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"># &lt;/ol&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"># &lt;h3&gt;Further Notes&lt;/h3&gt;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">#  With the Weights/Multiweights class you may choose to reimport the weights to a renamed geometry by passing the target to the relevant class, however this may</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"># mean you will have rewrite/extend the capability of the of relevant WeightManager class to handle this</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"># @attention</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"># @htmlonly &lt;li&gt; @endhtmlonlyThis module has not been tested with referenced objects. You may want to set the namespace to &quot;:&quot;. Alternatively use the @ref libFile.importFile() command to import your file without namespace. @htmlonly &lt;/li&gt; @endhtmlonly</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"># @htmlonly &lt;li&gt; @endhtmlonlyCurrently only polygon models are supported@htmlonly &lt;/li&gt; @endhtmlonly</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">import</span> libUtilities</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">import</span> libFile</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">import</span> libXml</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;reload(libUtilities)</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;reload(libXml)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">from</span> maya <span class="keyword">import</span> cmds</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">import</span> pymel.core <span class="keyword">as</span> pm</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">#     Class to export and import single XML weight maps from a geometry.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">#     @details This class is used when there normaly just one iteration of deformer in the rig eg skinCluster, muscle , cloth etc</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">#     @remarks</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">#     @htmlonly &lt;li&gt; @endhtmlonly A single xml file contains the weight map for the deformer.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">#     The name of this xml file is derived from the name of the geometry.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">#     </span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html">   74</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html">Weights</a>(object):</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment"># </span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">#         @property import_data</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">#         @brief The deformer data that is read from the data xml file. This content should be same as @ref export_data</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">#         @property export_data</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">#         @brief The deformer data that is written to the data xml file. This content should be same as @ref import_data</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">#         @property target</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">#         @brief The current geometry that is being processed.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">#         @property data</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">#         @brief Data property which is exported to the single data file.</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">#         @details The deformer is rebuilt from the information that is exported eg joints used in skinning, cluster pivot point. This property will be customised in further subclasses as per their requirement.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment"># </span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment"># </span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">#         </span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a0c620c9cb00b752c8fa132aa99dfdd2e">   90</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a0c620c9cb00b752c8fa132aa99dfdd2e">__init__</a>(self):</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">   91</a></span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#ad03a118a8484b4701a26ac25edbee023">_deformer_</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#af62d0c19ff128a93413b58b7017b5195">_folder_</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a9c9adf7bab2e47e305981f6f5a76334a">_file_</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5ce8aac9d9af430d3284546e97775834">_target_deformer_</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7c02013e4975c6cbbd6bcfa018e78a97">   96</a></span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7c02013e4975c6cbbd6bcfa018e78a97">import_data</a> = {}</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a8594d2e58a5b244b0f60aa3e37e2c640">   97</a></span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a8594d2e58a5b244b0f60aa3e37e2c640">export_data</a> = {}</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment"># @brief Export out the weights. @details Does error checks before exporting. This method may be written in the subclasses</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">#         By default we use the maya deformerWeights command to export the weight</span></div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#af06e93c0322719e3457a8c040147f0c1">  102</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#af06e93c0322719e3457a8c040147f0c1">export_weights</a>(self):</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#ad80884b683bb353f8108e6547545e136">_error_checks_</a>()</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        evalStatment = <span class="stringliteral">&#39;deformerWeights -export -method &quot;index&quot; -deformer &quot;%s&quot; -path &quot;%s&quot; &quot;%s&quot;&#39;</span> % (</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a>, self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a90bf3e28131eaa140b567bad39478079">folder</a>, self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a857e0bedf85e65068a87b3b74c80968c">file</a>)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        libUtilities.melEval(evalStatment)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keywordflow">print</span> <span class="stringliteral">&quot;Export Weights for &quot;</span> + self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment"># Check that the folder and deformer type is defined</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keyword">def </span>_error_checks_(self):</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a90bf3e28131eaa140b567bad39478079">folder</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;No Path Defined&quot;</span>)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a54f6fef798a3cf6f2301add4ba824e3e">deformer</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;No Defomer Defined&quot;</span>)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment"># Define the current deformer property</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keyword">def </span>_get_target_defomer_(self):</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5ce8aac9d9af430d3284546e97775834">_target_deformer_</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5ce8aac9d9af430d3284546e97775834">_target_deformer_</a> = libUtilities.get_target_defomer(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a>, self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a54f6fef798a3cf6f2301add4ba824e3e">deformer</a>)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5ce8aac9d9af430d3284546e97775834">_target_deformer_</a></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment"># Import the previously exported weights. Attempt to recreate the deformer first in case none are found</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">#         Use the default maya command as much as possible.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#ab488d4d73af9d8490f2e8a48887818bd">  128</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#ab488d4d73af9d8490f2e8a48887818bd">import_weights</a>(self):</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="comment"># Create the deformers before importing the weights</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a8de1421050281154f055616854aad3f4">_create_deformers_</a>()</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="comment"># Use the maya deformerWeights command to export the weight</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        evalStatment = <span class="stringliteral">&#39;deformerWeights -import -method &quot;index&quot; -deformer &quot;%s&quot; -path &quot;%s&quot; &quot;%s&quot;&#39;</span> % (</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a>, self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a90bf3e28131eaa140b567bad39478079">folder</a>, self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a857e0bedf85e65068a87b3b74c80968c">file</a>)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        libUtilities.melEval(evalStatment, echo=<span class="keyword">True</span>)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">print</span> <span class="stringliteral">&quot;Import Weights for &quot;</span> + self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keyword">def </span>_get_deformer_(self):</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="comment"># Return the type of deformer used</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#ad03a118a8484b4701a26ac25edbee023">_deformer_</a></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keyword">def </span>_set_deformer_(self, deformerString=&quot;&quot;):</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="comment"># Set the type of deformer property</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        sel = cmds.ls(sl=1)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        node = pm.createNode(deformerString)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="comment"># Make sure the deformer type is a supported by Maya</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">if</span> node.type() == <span class="stringliteral">&quot;unknown&quot;</span>:</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Unknown Deformer:&quot;</span> + deformerString)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#ad03a118a8484b4701a26ac25edbee023">_deformer_</a> = deformerString</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        pm.delete(node)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">if</span> sel:</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            cmds.select(sel)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">def </span>_get_file_(self):</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="comment"># Return the name of data xml file that is linked to the geo</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a9c9adf7bab2e47e305981f6f5a76334a">_file_</a>:</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a9c9adf7bab2e47e305981f6f5a76334a">_file_</a> = self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a> + <span class="stringliteral">&quot;.xml&quot;</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a9c9adf7bab2e47e305981f6f5a76334a">_file_</a></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keyword">def </span>_set_file_(self, fileName):</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment"># Check the file ends with xml file</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> libFile.has_extension(fileName, <span class="stringliteral">&quot;xml&quot;</span>):</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Weight file must end with .xml extension&quot;</span>)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="comment"># Set the name of data xml file that is linked to the geo</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a9c9adf7bab2e47e305981f6f5a76334a">_file_</a> = fileName</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keyword">def </span>_get_folder_(self):</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="comment"># Return the root folder as defined by the user</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#af62d0c19ff128a93413b58b7017b5195">_folder_</a></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keyword">def </span>_set_folder_(self, folder):</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="comment"># Get the root folder from the user</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment"># Make sure it exists</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">if</span> libFile.exists(folder):</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="comment"># Make sure that it is not a file</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">if</span> libFile.isdir(folder):</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                <span class="comment"># Save as maya compliant path</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#af62d0c19ff128a93413b58b7017b5195">_folder_</a> = libFile.linux_path(folder)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Not a folder: %s&quot;</span> % folder)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Folder does not exists: %s&quot;</span> % folder)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment"># To be defined in the subclasses</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keyword">def </span>_create_deformers_(self):</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="comment"># print a debug statement</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">print</span> <span class="stringliteral">&quot;Weight class _create_deformers_ called&quot;</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keyword">def </span>_set_target_defomer_(self, deformer):</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="comment"># Convert target deformer string to pynode</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        deformer = pm.PyNode(deformer)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment"># Ensure that deformer processes belong to the deformer class</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span> deformer.type() != self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a54f6fef798a3cf6f2301add4ba824e3e">deformer</a>:</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Deformer type mismatch&quot;</span>)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5ce8aac9d9af430d3284546e97775834">_target_deformer_</a> = deformer</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment"># Save out the deformer information to a test xml file</span></div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a33533319062acb468711288dd7febb0d">  200</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a33533319062acb468711288dd7febb0d">save_data</a>(self):</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        libXml.write_xml(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a6b42d6ecd6d8bdc6444ccc700648b325">datapath</a>, {<span class="stringliteral">&quot;DeformerInfo&quot;</span>: self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#acc11a6f2551d45a505ed458228e8d072">data</a>})</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment"># Load the data information from the test xml file</span></div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a50cbcc4cf0c4b6e0585f462a57be2f65">  205</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a50cbcc4cf0c4b6e0585f462a57be2f65">load_data</a>(self):</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#acc11a6f2551d45a505ed458228e8d072">  206</a></span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#acc11a6f2551d45a505ed458228e8d072">data</a> = libXml.ConvertXmlToDict(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a6b42d6ecd6d8bdc6444ccc700648b325">datapath</a>)[<span class="stringliteral">&quot;DeformerInfo&quot;</span>]</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    @property</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment"># File path to the xml file which contains data relevant to the deformer. This property is used in testing scenarios along with @ref load_data /@ref save_data method.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">#         @code</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">#         import libWeights</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">#         test = libWeights.Weights()</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">#         test.folder = r&quot;C:\temp\test&quot;</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">#         print test.datapath</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">#         # Result: &#39;c:/temp/test/info.xml&#39; #</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">#         @endcode</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">#         @return joined path of folder and the info xml file</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">#         </span></div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a6b42d6ecd6d8bdc6444ccc700648b325">  220</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a6b42d6ecd6d8bdc6444ccc700648b325">datapath</a>(self):</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">return</span> libFile.join(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a90bf3e28131eaa140b567bad39478079">folder</a>, <span class="stringliteral">&quot;info.xml&quot;</span>)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment"># @cond DOXYGEN_SHOULD_SKIP_THIS</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    @property</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#acc11a6f2551d45a505ed458228e8d072">data</a>(self):</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="comment"># Print debug statement</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">print</span> <span class="stringliteral">&quot;Base _get_data_ called&quot;</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    @data.setter</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#acc11a6f2551d45a505ed458228e8d072">data</a>(self, data):</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="comment"># Recieve data from the outside class</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7c02013e4975c6cbbd6bcfa018e78a97">import_data</a> = data</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment"># @endcond</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment"># @property folder</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment"># User defined folder where the weight and data file are saved</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a90bf3e28131eaa140b567bad39478079">  240</a></span>&#160;    folder = property(_get_folder_, _set_folder_)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment"># @property deformer</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment"># Which type of deformer is processed. This must be a valid maya node type eg &#39;skinCluster&#39;, &#39;blendShape&#39; etc</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a54f6fef798a3cf6f2301add4ba824e3e">  246</a></span>&#160;    deformer = property(_get_deformer_, _set_deformer_)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment"># @property target_deformer</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment"># The target maya deformer on which the export and import commands will be processed</span></div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">  251</a></span>&#160;    target_deformer = property(_get_target_defomer_, _set_target_defomer_)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment"># @property file</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">#The file name which contains the individual weights&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a857e0bedf85e65068a87b3b74c80968c">  257</a></span>&#160;    file = property(_get_file_, _set_file_)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">#     Class to import/export skinweights</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">#     @code</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">#     import libWeights</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">#     reload(libWeights)</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">#     test = libWeights.SkinWeights()</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">#     #REQUIRED SETUP</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">#     #Set the target geometry</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">#     test.target = &quot;pCube1&quot;</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">#     #Set the folder where the weights will be exported</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">#     test.folder = r&quot;C:\temp\test&quot;</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">#     ##EXPORT SETUP</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">#     #Save out the weights</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">#     test.export_weights()</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">#     #Test that deformer related data is gathered</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">#     test.save_data()</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">#     ##IMPORT SETUP</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">#     #Load the deformer data from the test xml file</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">#     test.load_data()</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">#     #Create deformer if needed and import in the weights</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">#     test.import_weights()</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">#     @endcode</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">#     @attention</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">#     This module works only with joints at the moment. If you are using surfaces as an influence object, you will need to extend capability of this class.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">#     </span></div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_skin_weights.html">  291</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_skin_weights.html">SkinWeights</a>(<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html">Weights</a>):</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment"># @cond DOXYGEN_SHOULD_SKIP_THIS</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a0c620c9cb00b752c8fa132aa99dfdd2e">__init__</a>(self):</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        super(SkinWeights, self).<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a0c620c9cb00b752c8fa132aa99dfdd2e">__init__</a>()</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a54f6fef798a3cf6f2301add4ba824e3e">deformer</a> = <span class="stringliteral">&quot;skinCluster&quot;</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="comment"># @endcond</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment"># Import the weight of the SkinCluster. After that normalise the weights</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">#         @remark The behaviour of Weights.import_weights is extended in this class</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">#         </span></div>
<div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_skin_weights.html#a6d98705199f4a06672fcfc605331074c">  302</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_skin_weights.html#a6d98705199f4a06672fcfc605331074c">import_weights</a>(self):</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        super(SkinWeights, self).<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_skin_weights.html#a6d98705199f4a06672fcfc605331074c">import_weights</a>()</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="comment"># Normalise the skin weights</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        pm.select(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a>)</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        libUtilities.melEval(<span class="stringliteral">&#39;doNormalizeWeightsArgList 1 {&quot;4&quot;}&#39;</span>)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment"># @brief Additional function to copy weights from the source geometry to a new one.@details This new geometry will be skinned with the same influence joints.</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">#         @code</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">#         test = libWeights.SkinWeights()</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">#         #Set the target geometry</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">#         test.target = &quot;pCube1&quot;</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">#         #copy the weights to the new gometery</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">#         test.copy_weights(&quot;pCube2&quot;)</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">#         @endcode</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">#         </span></div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_skin_weights.html#a9a3e83b4c34a29e1ee2c7589e42016fe">  318</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_skin_weights.html#a9a3e83b4c34a29e1ee2c7589e42016fe">copy_weights</a>(self, newTarget):</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        currentInfluences = pm.skinCluster(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a>, inf=<span class="keyword">True</span>, q=<span class="keyword">True</span>)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        res = libUtilities.skinGeo(newTarget, currentInfluences)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="comment"># Transfer the weights</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        pm.copySkinWeights(ss=self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a>, ds=res, noMirror=<span class="keyword">True</span>, surfaceAssociation=<span class="stringliteral">&quot;rayCast&quot;</span>,</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                           influenceAssociation=<span class="stringliteral">&quot;closestJoint&quot;</span>)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keyword">def </span>_create_deformers_(self):</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="comment"># Create the skin deformer if none exists</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a>:</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            jnts = []</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            noJnts = []</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="comment"># Alias for the joint list from the import data. Make sure the data is list</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            joint_data = libXml.list_persist(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7c02013e4975c6cbbd6bcfa018e78a97">import_data</a>[<span class="stringliteral">&quot;Joints&quot;</span>])</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="comment"># Iterate through all the joints in the list</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keywordflow">for</span> jnt <span class="keywordflow">in</span> joint_data:</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                <span class="comment"># Only bind joints that exists</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <span class="keywordflow">if</span> pm.objExists(jnt):</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    jnts.append(jnt)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    <span class="comment"># Log non existing joins</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                    noJnts.append(jnt)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="comment"># @cond DOXYGEN_SHOULD_SKIP_THIS</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a> = libUtilities.skinGeo(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a>, jnts)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="comment"># @endcond</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="comment"># Print out the list of missing joints</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="keywordflow">if</span> noJnts:</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <span class="keywordflow">print</span> <span class="stringliteral">&#39;\n%sThe Following Joints do not exists%s&#39;</span> % (</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                    libUtilities.print_attention(), libUtilities.print_attention())</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                libUtilities.print_list(noJnts)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="keywordflow">print</span> <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment"># @cond DOXYGEN_SHOULD_SKIP_THIS</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    @Weights.data.getter</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment"># Return the joints in this list to the data property</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">#         @return the joints used for the target skincluster.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">#         </span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#acc11a6f2551d45a505ed458228e8d072">data</a>(self):</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a8594d2e58a5b244b0f60aa3e37e2c640">export_data</a> = {<span class="stringliteral">&quot;Joints&quot;</span>: cmds.skinCluster(str(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a>), q=1, inf=1)}</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a8594d2e58a5b244b0f60aa3e37e2c640">export_data</a></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="comment">#@endcond</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">#     Class to export and import weight maps for multiple instances of the same deformers eg blendshapes, wire, clusters etc.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">#     A folder is created for each geo which contains the weights of the deformers. This class will be customised for each type of deformer.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">#     </span></div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html">  369</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html">MultiWeights</a>(<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html">Weights</a>):</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment"># @property deformer_data</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">#         @brief Contains @ref Weights.data &quot;data&quot; of each iteration of the deformer. The name of the deformer acts as a key for this dictionary variable</span></div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a2fbceaa416f4d1f87d35c961f0ae5ade">  374</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a2fbceaa416f4d1f87d35c961f0ae5ade">__init__</a>(self):</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        super(MultiWeights, self).<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a2fbceaa416f4d1f87d35c961f0ae5ade">__init__</a>()</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a50f415379c45029e28983047e3db12ca">_target_deformers_</a> = []</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#adab2cf18ec72cd58cef2a37c54ba66d1">_target_folder_</a> = <span class="stringliteral">&#39;&#39;</span></div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#ae5abd3a7344116d101858d27fad85839">  378</a></span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#ae5abd3a7344116d101858d27fad85839">deformer_data</a> = {}</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment"># </span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment"># </span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">#         @brief Export the individual weights for each iteration of the deformers.  @details Does error checks before exporting. By default we try to use the maya deformerWeights command to export the weight</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">#         @remark The behaviour of Weights.export_weights is overriden in this class</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment"># </span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="comment">#         </span></div>
<div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#ad7574024390c1027b860a5ac8ff41df1">  387</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#ad7574024390c1027b860a5ac8ff41df1">export_weights</a>(self):</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#ad80884b683bb353f8108e6547545e136">_error_checks_</a>()</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a26d5976e3cd9871275c4d5e95f3d7ae7">_export_individual_weights_</a>()</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">print</span> <span class="stringliteral">&quot;Export Weights for &quot;</span> + self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keyword">def </span>_export_individual_weights_(self):</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="comment"># Itererate through all target deformer</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">for</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a> <span class="keywordflow">in</span> self.target_deformers:</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="comment"># Export the weight with the name being the same as deformer</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            evalStatment = <span class="stringliteral">&#39;deformerWeights -export -method &quot;index&quot; -deformer &quot;%s&quot; -path &quot;%s&quot; &quot;%s&quot;&#39;</span> % (</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a>, self.target_folder, self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a857e0bedf85e65068a87b3b74c80968c">file</a>)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            libUtilities.melEval(evalStatment)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment"># @brief  Import the previously exported weights. @details Attempt to recreate the deformer first in case it is missing. All exported deformers will be recreated.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">#         Use the default maya command as much as possible.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">#         @remark The behaviour of Weights.import_weights is overriden in this class</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">#         </span></div>
<div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a13ddcdaa3fe0e0dd48d125e4f5592c4c">  405</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a13ddcdaa3fe0e0dd48d125e4f5592c4c">import_weights</a>(self):</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a8de1421050281154f055616854aad3f4">_create_deformers_</a>()</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a793b9a8c096aeb7821e7dd32a61adaf9">_import_individual_weights_</a>()</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">print</span> <span class="stringliteral">&quot;Import Weights for &quot;</span> + self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keyword">def </span>_import_individual_weights_(self):</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="comment"># Iterate through all the deformers and import the weigths</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">for</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a> <span class="keywordflow">in</span> libXml.list_persist(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7c02013e4975c6cbbd6bcfa018e78a97">import_data</a>[<span class="stringliteral">&quot;Order&quot;</span>]):</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="comment"># Import weight of cluster</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            weightInfo = libXml.ConvertXmlToDict(libFile.join(self.target_folder, self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a857e0bedf85e65068a87b3b74c80968c">file</a>))</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keywordflow">if</span> weightInfo[<span class="stringliteral">&#39;deformerWeight&#39;</span>].has_key(<span class="stringliteral">&quot;weights&quot;</span>):</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                evalStatment = <span class="stringliteral">&#39;deformerWeights -import -method &quot;index&quot; -deformer &quot;%s&quot; -path &quot;%s&quot; &quot;%s&quot;&#39;</span> % (</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a>, self.target_folder, self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a857e0bedf85e65068a87b3b74c80968c">file</a>)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                libUtilities.melEval(evalStatment)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment"># To be defined in the subclasses</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keyword">def </span>_get_deformer_data_(self):</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="comment"># print a debug statement</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">print</span> <span class="stringliteral">&quot;MultiWeights class _get_deformer_data_ called&quot;</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment"># To be defined in the subclasses</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keyword">def </span>_create_deformers_(self):</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="comment"># print a debug statement</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">print</span> <span class="stringliteral">&quot;MultiWeights class _create_deformers_ called&quot;</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment"># @cond DOXYGEN_SHOULD_SKIP_THIS</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    @Weights.data.getter</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment"># The deformer data property</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#acc11a6f2551d45a505ed458228e8d072">data</a>(self):</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="comment"># Gather the export data</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a0833cef952c0ccd988e1d19447548f83">_get_deformer_data_</a>()</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="comment"># Order of deformer</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a8594d2e58a5b244b0f60aa3e37e2c640">export_data</a> = {<span class="stringliteral">&quot;Order&quot;</span>: self.target_deformers,</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                            <span class="stringliteral">&quot;Data&quot;</span>: self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#ae5abd3a7344116d101858d27fad85839">deformer_data</a></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                            }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">#Return the export data</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a8594d2e58a5b244b0f60aa3e37e2c640">export_data</a></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    @property</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a6b42d6ecd6d8bdc6444ccc700648b325">datapath</a>(self):</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="comment"># File path to the xml file which contains data relevant to the deformer. Here the data is saved in the subfolder This variable is usually used in testing scenarios</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">return</span> libFile.join(self.target_folder, <span class="stringliteral">&quot;%sInfo.xml&quot;</span> % self.deformer.capitalize())</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    @property</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a857e0bedf85e65068a87b3b74c80968c">file</a>(self):</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="comment">#Each exported file is based on the name of the deformer rather than the target</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">return</span> (<span class="stringliteral">&quot;%s.xml&quot;</span> % self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a>)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    @property</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keyword">def </span>target_deformers(self):</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="comment"># Return the list of target deformer type for the geometry</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a50f415379c45029e28983047e3db12ca">_target_deformers_</a>:</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a50f415379c45029e28983047e3db12ca">_target_deformers_</a> = libUtilities.get_target_defomer(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a>, self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a54f6fef798a3cf6f2301add4ba824e3e">deformer</a>, multiple=<span class="keyword">True</span>)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a50f415379c45029e28983047e3db12ca">_target_deformers_</a></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    @property</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keyword">def </span>target_folder(self):</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="comment"># Create a subfolder with geometry name as the name of the folder</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#adab2cf18ec72cd58cef2a37c54ba66d1">_target_folder_</a>:</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#adab2cf18ec72cd58cef2a37c54ba66d1">_target_folder_</a> = libFile.folder_check(libFile.join(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a90bf3e28131eaa140b567bad39478079">folder</a>, str(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a>)))</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#adab2cf18ec72cd58cef2a37c54ba66d1">_target_folder_</a></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="comment"># @endcond</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">#       Class to import/export cluster weights</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">#       @code</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">#       import libWeights</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">#       reload(libWeights)</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">#       test = libWeights.ClusterWeights()</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">#       #REQUIRED SETUP</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">#       #Set the target geometry</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">#       test.target = &quot;pCube1&quot;</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">#       #Set the folder where the weights will be exported</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">#       test.folder = r&quot;C:\temp\test&quot;</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">#       ##EXPORT SETUP</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">#       #Save out the weights</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">#       test.export_weights()</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">#       #Test that deformer related data is gathered</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">#       test.save_data()</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">#       ##IMPORT SETUP</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">#       #Load the deformer data from the test xml file</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">#       test.load_data()</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">#       #Create deformer if needed and import in the weights</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">#       test.import_weights()</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">#       @endcode</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">#       @remark</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">#       The @ref data xml file contains the vertices that are affected by the cluster deformer. This takes into account when the user creates a cluster from selected vertices.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">#     </span></div>
<div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_cluster_weights.html">  505</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_cluster_weights.html">ClusterWeights</a>(<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html">MultiWeights</a>):</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment"># @cond DOXYGEN_SHOULD_SKIP_THIS</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a2fbceaa416f4d1f87d35c961f0ae5ade">__init__</a>(self):</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        super(ClusterWeights, self).<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a2fbceaa416f4d1f87d35c961f0ae5ade">__init__</a>()</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a54f6fef798a3cf6f2301add4ba824e3e">deformer</a> = <span class="stringliteral">&quot;cluster&quot;</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="comment"># @endcond</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keyword">def </span>_get_deformer_data_(self):</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="comment"># Itererate through all target deformer</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="keywordflow">for</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a> <span class="keywordflow">in</span> self.target_deformers:</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            info = {}</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            handle = libUtilities.pyList(self.target_deformer.getDeformerTools())[0]</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            <span class="comment"># Cluster Handle Name</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            info[<span class="stringliteral">&quot;ClusterHandleName&quot;</span>] = handle.name()</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <span class="comment"># Cluster Handle Pivot positions</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            info[<span class="stringliteral">&quot;RotatePivot&quot;</span>] = list(handle.getRotatePivot())</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            info[<span class="stringliteral">&quot;ScalePivot&quot;</span>] = list(handle.getScalePivot())</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <span class="comment"># Relative</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            info[<span class="stringliteral">&quot;Relative&quot;</span>] = int(self.target_deformer.relative.get())</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            <span class="comment"># Vertices affected</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            verticesSet = self.target_deformer.listSets()[0]</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            info[<span class="stringliteral">&quot;Vertices&quot;</span>] = libUtilities.indexize_vertice_group(verticesSet.members())</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#ae5abd3a7344116d101858d27fad85839">deformer_data</a>[str(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a>)] = info</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keyword">def </span>_create_deformers_(self):</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="comment"># Build in the order of the clusters</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">for</span> cluster <span class="keywordflow">in</span> libXml.list_persist(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7c02013e4975c6cbbd6bcfa018e78a97">import_data</a>[<span class="stringliteral">&quot;Order&quot;</span>]):</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> pm.objExists(cluster):</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                <span class="comment"># Read info for each cluster</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                info = self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7c02013e4975c6cbbd6bcfa018e78a97">import_data</a>[<span class="stringliteral">&quot;Data&quot;</span>][cluster]</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                <span class="comment"># select vertices</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                libUtilities.select_vertices(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a>, libXml.list_persist(info[<span class="stringliteral">&quot;Vertices&quot;</span>]))</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                <span class="comment"># Create the cluster</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                cltr, cTransform = pm.cluster(rel=info[<span class="stringliteral">&quot;Relative&quot;</span>])</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                <span class="comment"># Set the pivot</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                pm.setAttr(cTransform.scalePivot, info[<span class="stringliteral">&quot;ScalePivot&quot;</span>])</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                pm.setAttr(cTransform.rotatePivot, info[<span class="stringliteral">&quot;RotatePivot&quot;</span>])</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                <span class="comment"># Rename</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                cTransform.rename(info[<span class="stringliteral">&quot;ClusterHandleName&quot;</span>])</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                cltr.rename(cluster)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">#       Class to import/export blendshape weights</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">#       @code</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">#       import libWeights</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">#       reload(libWeights)</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">#       test = libWeights.BlendShapeWeights()</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">#       #REQUIRED SETUP</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">#       #Set the target geometry</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">#       test.target = &quot;pCube1&quot;</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">#       #Set the folder where the weights will be exported</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">#       test.folder = r&quot;C:\temp\test&quot;</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">#       ##EXPORT SETUP</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">#       #Save out the weights</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">#       test.export_weights()</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">#       #Test that deformer related data is gathered</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">#       test.save_data()</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">#       ##IMPORT SETUP</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">#       #Load the deformer data from the test xml file</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">#       test.load_data()</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">#       #Create deformer if needed and import in the weights</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">#       test.import_weights()</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">#       @endcode</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">#       @attention &amp;bull; This class does not supports painted weights on the envelope. However individual painted weights are supported.</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">#       @attention &amp;bull; If you are rebuilding the blendshapes, then the target shapes needs to imported first before the weights are imported. You may use the @ref libFile.importFile() command to import the file with the blendshapes.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">#     </span></div>
<div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_blend_shape_weights.html">  579</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_blend_shape_weights.html">BlendShapeWeights</a>(<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html">MultiWeights</a>):</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="comment"># @cond DOXYGEN_SHOULD_SKIP_THIS</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a2fbceaa416f4d1f87d35c961f0ae5ade">__init__</a>(self):</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        super(BlendShapeWeights, self).<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a2fbceaa416f4d1f87d35c961f0ae5ade">__init__</a>()</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a54f6fef798a3cf6f2301add4ba824e3e">deformer</a> = <span class="stringliteral">&quot;blendShape&quot;</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment"># @endcond</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keyword">def </span>_get_deformer_data_(self):</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="comment"># Itererate through all blendshape</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">for</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a> <span class="keywordflow">in</span> self.target_deformers:</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#ae5abd3a7344116d101858d27fad85839">deformer_data</a>[str(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a>)] = self.target_deformer.getTarget()</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keyword">def </span>_export_individual_weights_(self):</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        vertices = pm.polyEvaluate(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a>, vertex=<span class="keyword">True</span>)</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="comment"># Itererate through all target deformer</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keywordflow">for</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a> <span class="keywordflow">in</span> self.target_deformers:</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            weightMap = {}</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            <span class="comment"># Iterate through shapes.</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">for</span> index, niceName <span class="keywordflow">in</span> zip(self.target_deformer.weightIndexList(), self.target_deformer.getTarget()):</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                <span class="comment"># Get the weights</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                weight_cmd = <span class="stringliteral">&#39;%s.inputTarget[0].inputTargetGroup[%i].targetWeights[0:%d]&#39;</span> % (</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                    self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a>, index, vertices - 1)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                weights = cmds.getAttr(weight_cmd)</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                <span class="comment"># Check if there are any painted weights.</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                <span class="keywordflow">if</span> len(list(set(weights))) &gt; 1:</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                    weightMap[niceName] = weights</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="comment"># Export out the weights map information</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            <span class="keywordflow">if</span> len(weightMap):</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                <span class="comment">#Save the xml file</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                libXml.write_xml(self.weight_file, {<span class="stringliteral">&quot;WeightMap&quot;</span>: weightMap})</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keyword">def </span>_create_deformers_(self):</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="comment"># Setup missing geo shapes dictionary</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        missing_shapes = {}</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="comment"># Build in the order of blendshapes</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">for</span> blendshape <span class="keywordflow">in</span> libXml.list_persist(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7c02013e4975c6cbbd6bcfa018e78a97">import_data</a>[<span class="stringliteral">&quot;Order&quot;</span>]):</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <span class="comment"># Check if the blendshapes exists. If so create one.</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            shapes = libXml.list_persist(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7c02013e4975c6cbbd6bcfa018e78a97">import_data</a>[<span class="stringliteral">&quot;Data&quot;</span>][blendshape])</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> pm.objExists(blendshape):</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="comment"># Read info for each blendshape</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <span class="comment"># select select the shapes.</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                pm.select(cl=1)</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <span class="keywordflow">for</span> shape <span class="keywordflow">in</span> shapes:</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    <span class="comment"># Check the shape exists</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    <span class="keywordflow">if</span> pm.objExists(shape):</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                        <span class="comment"># Add to the selection</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                        pm.select(shape, add=1)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                        <span class="comment"># If not then then add to error list dictionary</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                        <span class="keywordflow">if</span> missing_shapes.has_key(blendshape):</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                            missing_shapes[blendshape].append(shape)</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                            missing_shapes[blendshape] = [shape]</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                <span class="comment"># Select the target geo and create blendshape</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                pm.select(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">target</a>, add=1)</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                pm.blendShape(name=blendshape)</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">if</span> len(missing_shapes):</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;#######The following blends had missing shapes#######&quot;</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="keywordflow">for</span> key <span class="keywordflow">in</span> missing_shapes.keys():</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <span class="keywordflow">print</span> key.upper()</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                libUtilities.print_list(missing_shapes[key])</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keyword">def </span>_import_individual_weights_(self):</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="comment"># Iterate through all the deformers</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordflow">for</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a> <span class="keywordflow">in</span> self.target_deformers:</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            <span class="comment"># Load the weights if they were exported</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            <span class="keywordflow">if</span> libFile.exists(self.weight_file):</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                weightMap = libXml.ConvertXmlToDict(self.weight_file)[<span class="stringliteral">&quot;WeightMap&quot;</span>]</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                <span class="keywordflow">for</span> index, niceName <span class="keywordflow">in</span> zip(self.target_deformer.weightIndexList(), self.target_deformer.getTarget()):</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                    <span class="comment"># Apply the weight if there was a weight map</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                    <span class="keywordflow">if</span> weightMap.has_key(niceName):</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                        <span class="comment"># Get the weight from the dictionary</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                        weights = weightMap[niceName]</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                        <span class="comment"># Set the weight</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                        weight_cmd = <span class="stringliteral">&#39;%s.inputTarget[0].inputTargetGroup[%i].targetWeights[0:%d]&#39;</span> % (</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                            self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">target_deformer</a>, index, len(weights) - 1)</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                        cmds.setAttr(weight_cmd, *weights)</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="comment"># @cond DOXYGEN_SHOULD_SKIP_THIS</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    @property</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keyword">def </span>weight_file(self):</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="comment"># Return the weight map file for each blendshape</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">return</span> libFile.join(self.target_folder, self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a857e0bedf85e65068a87b3b74c80968c">file</a>)</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="comment">#@endcond</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="stringliteral">&quot;----------------------------------------------------------------------------------------------------------------------------------------------&quot;</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">#     Class which manages the mass import/export of deformers. For import geometry must be selected</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">#     </span></div>
<div class="line"><a name="l00676"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html">  676</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html">WeightManager</a>(object):</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="comment"># </span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="comment">#         @property weight_class</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="comment">#         @brief The Weights class that is used to export/import the weights and deformer data.</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="comment"># </span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="comment">#         @property command_mode</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="comment">#         @brief boolean flag that is used in @ref libUtilities.get_selected command. By default set to False</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="comment"># </span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="comment">#         </span></div>
<div class="line"><a name="l00687"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a121c9f55489fa17e416bca2442dcb3e5">  687</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a121c9f55489fa17e416bca2442dcb3e5">__init__</a>(self):</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a4d1821fc4b22f80aa3b8bab6163e8d8b">_xml_file_</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00690"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#ae7f812afa3beaae3f410811fc26e451d">  690</a></span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#ae7f812afa3beaae3f410811fc26e451d">weight_class</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#aef369ba61afc51f83e1a5fae30678fa6">  691</a></span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#aef369ba61afc51f83e1a5fae30678fa6">command_mode</a> = <span class="keyword">False</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#abb19543aa8ec333a64b78d1fea938571">_deformer_</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="comment"># Exports the weights and deformer data of the selected objects using the @ref weight_class</span></div>
<div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a0e5c92c48fbbd4cfe2b250e95742d8ff">  696</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a0e5c92c48fbbd4cfe2b250e95742d8ff">export_all</a>(self):</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="comment"># get the selected geo</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        sel = libUtilities.get_selected(stringMode=<span class="keyword">True</span>, scriptEditorWarning=self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#aef369ba61afc51f83e1a5fae30678fa6">command_mode</a>)</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> sel:</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="comment"># In nothing has been selected</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="comment"># Setup the geo dictionary</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        geoInfo = {}</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="comment"># Iterate through all the geo</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keywordflow">for</span> geo <span class="keywordflow">in</span> sel:</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <span class="comment"># Ensure the geometry has the deformer</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> libUtilities.get_target_defomer(geo, self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a7741b0ded56e78e656096cf149c77df2">deformer</a>, multiple=<span class="keyword">True</span>):</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                <span class="keywordflow">print</span> (<span class="stringliteral">&quot;No %s Found for %s&quot;</span> % (self.deformer.capitalize(), geo))</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                <span class="keywordflow">continue</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <span class="comment"># Initialise the weight class</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            deformerWeight = self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#ae789fa42069b319e4ff3cf16f9f7432a">_initialise_class_</a>(geo)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            <span class="comment"># Export the weight</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            deformerWeight.export_weights()</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            <span class="comment"># Get the export data</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            geoInfo[geo] = deformerWeight.data</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="comment"># Save out the xml file</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="keywordflow">if</span> geoInfo:</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            deformerType = self.deformer.capitalize()</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            <span class="keywordflow">print</span> (<span class="stringliteral">&quot;========%s Info Path========\n%s&quot;</span> % (deformerType, self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a2130a4280228f757295aa1b007c81f85">info_file</a>))</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            libXml.write_xml(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a2130a4280228f757295aa1b007c81f85">info_file</a>, {<span class="stringliteral">&quot;%sInfo&quot;</span> % deformerType: geoInfo})</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        cmds.select(sel)</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="comment"># Return a success result</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="comment"># Import the exported weights and data using the @ref weight_class</span></div>
<div class="line"><a name="l00730"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#acb5ddfa7636502d428a9fdce53727a7e">  730</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#acb5ddfa7636502d428a9fdce53727a7e">import_all</a>(self):</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="comment"># Import all Weights for selected object based on the information in the skinInfo</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        geoInfo = libXml.ConvertXmlToDict(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a2130a4280228f757295aa1b007c81f85">info_file</a>)[<span class="stringliteral">&quot;%sInfo&quot;</span> % self.deformer.capitalize()]</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">for</span> geo <span class="keywordflow">in</span> geoInfo.keys():</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="keywordflow">if</span> pm.objExists(geo):</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                <span class="comment"># Initialise the weight class</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                deformerWeight = self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#ae789fa42069b319e4ff3cf16f9f7432a">_initialise_class_</a>(geo)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                <span class="comment"># Set the deformer data</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                deformerWeight.data = geoInfo[geo]</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                <span class="comment"># Import the weights</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                deformerWeight.import_weights()</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                <span class="comment"># Ensure the geometry exists</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                <span class="keywordflow">print</span> <span class="stringliteral">&quot;GEO DOES NOT EXISTS: &quot;</span> + geo</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        pm.select(cl=1)</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keyword">def </span>_initialise_class_(self, geo):</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="comment"># Initialise the target class with the target geo</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        deformerWeight = self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#ae7f812afa3beaae3f410811fc26e451d">weight_class</a>()</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        deformerWeight.folder = self.folder</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        deformerWeight.target = geo</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">return</span> deformerWeight</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keyword">def </span>_get_xml_file_(self):</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="comment"># Is the xml file defined</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a4d1821fc4b22f80aa3b8bab6163e8d8b">_xml_file_</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <span class="comment"># raise error</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            cmds.error(<span class="stringliteral">&quot;XML file not defined&quot;</span>)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <span class="comment"># return the XML path</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a4d1821fc4b22f80aa3b8bab6163e8d8b">_xml_file_</a></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keyword">def </span>_set_xml_file_(self, path):</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="comment"># Check that the file path ends with xml path</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> libFile.has_extension(path, <span class="stringliteral">&quot;xml&quot;</span>):</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            cmds.error(<span class="stringliteral">&#39;File path must end with &quot;.xml&quot; extensions&#39;</span>)</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="comment"># Check that parent folder exists for the xml path</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        parent_folder = libFile.get_parent_folder(path)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> libFile.exists(parent_folder):</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            <span class="comment"># Create the parent folder</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            libFile.folder_check(parent_folder)</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;Parent folder of the xml file did not exist. A folder was created&quot;</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="comment"># Set the XML path</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a4d1821fc4b22f80aa3b8bab6163e8d8b">_xml_file_</a> = libFile.linux_path(path)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="comment"># @property info_file</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="comment">#User defined data path which contains the @ref Weights.data &quot;deformer data&quot; of all the processed geometry.</span></div>
<div class="line"><a name="l00778"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a2130a4280228f757295aa1b007c81f85">  778</a></span>&#160;    info_file = property(_get_xml_file_, _set_xml_file_)</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    @property</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="comment"># returns the Weights.deformer property information</span></div>
<div class="line"><a name="l00783"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a7741b0ded56e78e656096cf149c77df2">  783</a></span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a7741b0ded56e78e656096cf149c77df2">deformer</a>(self):</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#abb19543aa8ec333a64b78d1fea938571">_deformer_</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#abb19543aa8ec333a64b78d1fea938571">_deformer_</a> = self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#ae7f812afa3beaae3f410811fc26e451d">weight_class</a>().deformer</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#abb19543aa8ec333a64b78d1fea938571">_deformer_</a></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="comment"># @cond DOXYGEN_SHOULD_SKIP_THIS</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    @property</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keyword">def </span>folder(self):</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="comment">#Return the parent folder of the info file</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="keywordflow">return</span> libFile.get_parent_folder(self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a2130a4280228f757295aa1b007c81f85">info_file</a>)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <span class="comment"># @endcond</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">#     Class which manages the mass import/export of skinCluster.</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">#     @code</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">#     import libWeights</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">#     reload(libWeights)</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">#     test = libWeights.SkinWeightManager()</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">#     #REQUIRED SETUP</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">#     #Set the xml file path where all deformer info of the selected geometry will be saved</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">#     test.info_file = r&quot;C:/test/SkinData/SkinInfo.xml&quot;</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">#     ##EXPORT SETUP</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">#     #Save out the weights</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">#     test.export_all()</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">#     ##IMPORT SETUP</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">#     #Create deformers if needed and import in the weights for all the geometry</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">#     test.import_all()</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">#     @endcode</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">#     </span></div>
<div class="line"><a name="l00817"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_skin_weight_manager.html">  817</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_skin_weight_manager.html">SkinWeightManager</a>(<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html">WeightManager</a>):</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="comment"># @cond DOXYGEN_SHOULD_SKIP_THIS</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a121c9f55489fa17e416bca2442dcb3e5">__init__</a>(self):</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        super(SkinWeightManager, self).<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a121c9f55489fa17e416bca2442dcb3e5">__init__</a>()</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#ae7f812afa3beaae3f410811fc26e451d">weight_class</a> = SkinWeights</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="comment"># @endcond</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">#     Class which manages the mass import/export of clusters.</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">#     @code</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">#     import libWeights</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">#     reload(libWeights)</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">#     test = libWeights.ClusterWeightManager()</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">#     #REQUIRED SETUP</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">#     #Set the xml file path where all deformer info of the selected geometry will be saved</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">#     test.info_file = r&quot;C:/test/ClusterData/ClusterInfo.xml&quot;</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">#     ##EXPORT SETUP</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">#     #Save out the weights</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment">#     test.export_all()</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment">#     ##IMPORT SETUP</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">#     #Create deformers if needed and import in the weights for all the geometry</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">#     test.import_all()</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">#     @endcode</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment">#     </span></div>
<div class="line"><a name="l00848"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_cluster_weight_manager.html">  848</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_cluster_weight_manager.html">ClusterWeightManager</a>(<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html">WeightManager</a>):</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="comment"># @cond DOXYGEN_SHOULD_SKIP_THIS</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a121c9f55489fa17e416bca2442dcb3e5">__init__</a>(self):</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        super(ClusterWeightManager, self).<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a121c9f55489fa17e416bca2442dcb3e5">__init__</a>()</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#ae7f812afa3beaae3f410811fc26e451d">weight_class</a> = ClusterWeights</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="comment"># @endcond</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">#     Class which manages the mass import/export of blendshapes.</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">#     @code</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">#     import libWeights</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">#     reload(libWeights)</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">#     test = libWeights.BlendsWeightManager()</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">#     #REQUIRED SETUP</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">#     #Set the xml file path where all deformer info of the selected geometry will be saved</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">#     test.info_file = r&quot;C:/test/BlendData/BlendInfo.xml&quot;</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">#     ##EXPORT SETUP</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment">#     #Save out the weights</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">#     test.export_all()</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">#     ##IMPORT SETUP</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">#     #Create deformers if needed and import in the weights for all the geometry</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">#     test.import_all()</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">#     @endcode</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">#     </span></div>
<div class="line"><a name="l00878"></a><span class="lineno"><a class="line" href="class_p_k_d___tools_1_1lib_weights_1_1_blends_weight_manager.html">  878</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_blends_weight_manager.html">BlendsWeightManager</a>(<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html">WeightManager</a>):</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="comment"># @cond DOXYGEN_SHOULD_SKIP_THIS</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keyword">def </span><a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a121c9f55489fa17e416bca2442dcb3e5">__init__</a>(self):</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        super(BlendsWeightManager, self).<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a121c9f55489fa17e416bca2442dcb3e5">__init__</a>()</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        self.<a class="code" href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#ae7f812afa3beaae3f410811fc26e451d">weight_class</a> = BlendShapeWeights</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="comment">#@endcond</span></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_skin_weights_html_a6d98705199f4a06672fcfc605331074c"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_skin_weights.html#a6d98705199f4a06672fcfc605331074c">PKD_Tools.libWeights.SkinWeights.import_weights</a></div><div class="ttdeci">def import_weights(self)</div><div class="ttdoc">Import the weight of the SkinCluster. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00302">libWeights.py:302</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a7aef1027fec8cad876d4bf7134591d12"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7aef1027fec8cad876d4bf7134591d12">PKD_Tools.libWeights.Weights.target</a></div><div class="ttdeci">target</div><div class="ttdoc">The current geometry that is being processed. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00091">libWeights.py:91</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager_html_a7741b0ded56e78e656096cf149c77df2"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a7741b0ded56e78e656096cf149c77df2">PKD_Tools.libWeights.WeightManager.deformer</a></div><div class="ttdeci">def deformer(self)</div><div class="ttdoc">returns the Weights.deformer property information </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00783">libWeights.py:783</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_ab488d4d73af9d8490f2e8a48887818bd"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#ab488d4d73af9d8490f2e8a48887818bd">PKD_Tools.libWeights.Weights.import_weights</a></div><div class="ttdeci">def import_weights(self)</div><div class="ttdoc">Import the previously exported weights. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00128">libWeights.py:128</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager_html_acb5ddfa7636502d428a9fdce53727a7e"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#acb5ddfa7636502d428a9fdce53727a7e">PKD_Tools.libWeights.WeightManager.import_all</a></div><div class="ttdeci">def import_all(self)</div><div class="ttdoc">Import the exported weights and data using the weight_class. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00730">libWeights.py:730</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_cluster_weights_html"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_cluster_weights.html">PKD_Tools.libWeights.ClusterWeights</a></div><div class="ttdoc">Class to import/export cluster weights. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00505">libWeights.py:505</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a8de1421050281154f055616854aad3f4"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a8de1421050281154f055616854aad3f4">PKD_Tools.libWeights.Weights._create_deformers_</a></div><div class="ttdeci">def _create_deformers_(self)</div><div class="ttdoc">To be defined in the subclasses. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00185">libWeights.py:185</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager_html_abb19543aa8ec333a64b78d1fea938571"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#abb19543aa8ec333a64b78d1fea938571">PKD_Tools.libWeights.WeightManager._deformer_</a></div><div class="ttdeci">_deformer_</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00692">libWeights.py:692</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a5ce8aac9d9af430d3284546e97775834"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5ce8aac9d9af430d3284546e97775834">PKD_Tools.libWeights.Weights._target_deformer_</a></div><div class="ttdeci">_target_deformer_</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00095">libWeights.py:95</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager_html_a2130a4280228f757295aa1b007c81f85"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a2130a4280228f757295aa1b007c81f85">PKD_Tools.libWeights.WeightManager.info_file</a></div><div class="ttdeci">info_file</div><div class="ttdoc">User defined data path which contains the deformer data of all the processed geometry. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00778">libWeights.py:778</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights_html_adab2cf18ec72cd58cef2a37c54ba66d1"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#adab2cf18ec72cd58cef2a37c54ba66d1">PKD_Tools.libWeights.MultiWeights._target_folder_</a></div><div class="ttdeci">_target_folder_</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00377">libWeights.py:377</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights_html_ae5abd3a7344116d101858d27fad85839"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#ae5abd3a7344116d101858d27fad85839">PKD_Tools.libWeights.MultiWeights.deformer_data</a></div><div class="ttdeci">deformer_data</div><div class="ttdoc">Contains data of each iteration of the deformer. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00378">libWeights.py:378</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager_html_ae7f812afa3beaae3f410811fc26e451d"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#ae7f812afa3beaae3f410811fc26e451d">PKD_Tools.libWeights.WeightManager.weight_class</a></div><div class="ttdeci">weight_class</div><div class="ttdoc">The Weights class that is used to export/import the weights and deformer data. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00690">libWeights.py:690</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html">PKD_Tools.libWeights.Weights</a></div><div class="ttdoc">Class to export and import single XML weight maps from a geometry. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00074">libWeights.py:74</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights_html"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html">PKD_Tools.libWeights.MultiWeights</a></div><div class="ttdoc">Class to export and import weight maps for multiple instances of the same deformers eg blendshapes...</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00369">libWeights.py:369</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a5815d26080893cacaa819537a96e8b6b"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a5815d26080893cacaa819537a96e8b6b">PKD_Tools.libWeights.Weights.target_deformer</a></div><div class="ttdeci">target_deformer</div><div class="ttdoc">The target maya deformer on which the export and import commands will be processed. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00251">libWeights.py:251</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_skin_weights_html_a9a3e83b4c34a29e1ee2c7589e42016fe"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_skin_weights.html#a9a3e83b4c34a29e1ee2c7589e42016fe">PKD_Tools.libWeights.SkinWeights.copy_weights</a></div><div class="ttdeci">def copy_weights(self, newTarget)</div><div class="ttdoc">Additional function to copy weights from the source geometry to a new one. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00318">libWeights.py:318</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_ad03a118a8484b4701a26ac25edbee023"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#ad03a118a8484b4701a26ac25edbee023">PKD_Tools.libWeights.Weights._deformer_</a></div><div class="ttdeci">_deformer_</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00092">libWeights.py:92</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights_html_a793b9a8c096aeb7821e7dd32a61adaf9"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a793b9a8c096aeb7821e7dd32a61adaf9">PKD_Tools.libWeights.MultiWeights._import_individual_weights_</a></div><div class="ttdeci">def _import_individual_weights_(self)</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00410">libWeights.py:410</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights_html_ad7574024390c1027b860a5ac8ff41df1"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#ad7574024390c1027b860a5ac8ff41df1">PKD_Tools.libWeights.MultiWeights.export_weights</a></div><div class="ttdeci">def export_weights(self)</div><div class="ttdoc">Export the individual weights for each iteration of the deformers. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00387">libWeights.py:387</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights_html_a2fbceaa416f4d1f87d35c961f0ae5ade"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a2fbceaa416f4d1f87d35c961f0ae5ade">PKD_Tools.libWeights.MultiWeights.__init__</a></div><div class="ttdeci">def __init__(self)</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00374">libWeights.py:374</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager_html_a0e5c92c48fbbd4cfe2b250e95742d8ff"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a0e5c92c48fbbd4cfe2b250e95742d8ff">PKD_Tools.libWeights.WeightManager.export_all</a></div><div class="ttdeci">def export_all(self)</div><div class="ttdoc">Exports the weights and deformer data of the selected objects using the weight_class. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00696">libWeights.py:696</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_skin_weight_manager_html"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_skin_weight_manager.html">PKD_Tools.libWeights.SkinWeightManager</a></div><div class="ttdoc">Class which manages the mass import/export of skinCluster. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00817">libWeights.py:817</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a50cbcc4cf0c4b6e0585f462a57be2f65"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a50cbcc4cf0c4b6e0585f462a57be2f65">PKD_Tools.libWeights.Weights.load_data</a></div><div class="ttdeci">def load_data(self)</div><div class="ttdoc">Load the data information from the test xml file. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00205">libWeights.py:205</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a33533319062acb468711288dd7febb0d"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a33533319062acb468711288dd7febb0d">PKD_Tools.libWeights.Weights.save_data</a></div><div class="ttdeci">def save_data(self)</div><div class="ttdoc">Save out the deformer information to a test xml file. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00200">libWeights.py:200</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_af62d0c19ff128a93413b58b7017b5195"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#af62d0c19ff128a93413b58b7017b5195">PKD_Tools.libWeights.Weights._folder_</a></div><div class="ttdeci">_folder_</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00093">libWeights.py:93</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a90bf3e28131eaa140b567bad39478079"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a90bf3e28131eaa140b567bad39478079">PKD_Tools.libWeights.Weights.folder</a></div><div class="ttdeci">folder</div><div class="ttdoc">User defined folder where the weight and data file are saved. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00240">libWeights.py:240</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a7c02013e4975c6cbbd6bcfa018e78a97"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a7c02013e4975c6cbbd6bcfa018e78a97">PKD_Tools.libWeights.Weights.import_data</a></div><div class="ttdeci">import_data</div><div class="ttdoc">The deformer data that is read from the data xml file. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00096">libWeights.py:96</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_ad80884b683bb353f8108e6547545e136"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#ad80884b683bb353f8108e6547545e136">PKD_Tools.libWeights.Weights._error_checks_</a></div><div class="ttdeci">def _error_checks_(self)</div><div class="ttdoc">Check that the folder and deformer type is defined. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00112">libWeights.py:112</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_blend_shape_weights_html"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_blend_shape_weights.html">PKD_Tools.libWeights.BlendShapeWeights</a></div><div class="ttdoc">Class to import/export blendshape weights. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00579">libWeights.py:579</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_acc11a6f2551d45a505ed458228e8d072"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#acc11a6f2551d45a505ed458228e8d072">PKD_Tools.libWeights.Weights.data</a></div><div class="ttdeci">data</div><div class="ttdoc">Data property which is exported to the single data file. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00206">libWeights.py:206</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager_html_aef369ba61afc51f83e1a5fae30678fa6"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#aef369ba61afc51f83e1a5fae30678fa6">PKD_Tools.libWeights.WeightManager.command_mode</a></div><div class="ttdeci">command_mode</div><div class="ttdoc">boolean flag that is used in libUtilities.get_selected command. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00691">libWeights.py:691</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a8594d2e58a5b244b0f60aa3e37e2c640"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a8594d2e58a5b244b0f60aa3e37e2c640">PKD_Tools.libWeights.Weights.export_data</a></div><div class="ttdeci">export_data</div><div class="ttdoc">The deformer data that is written to the data xml file. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00097">libWeights.py:97</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights_html_a26d5976e3cd9871275c4d5e95f3d7ae7"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a26d5976e3cd9871275c4d5e95f3d7ae7">PKD_Tools.libWeights.MultiWeights._export_individual_weights_</a></div><div class="ttdeci">def _export_individual_weights_(self)</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00392">libWeights.py:392</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_skin_weights_html"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_skin_weights.html">PKD_Tools.libWeights.SkinWeights</a></div><div class="ttdoc">Class to import/export skinweights. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00291">libWeights.py:291</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_blends_weight_manager_html"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_blends_weight_manager.html">PKD_Tools.libWeights.BlendsWeightManager</a></div><div class="ttdoc">Class which manages the mass import/export of blendshapes. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00878">libWeights.py:878</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager_html"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html">PKD_Tools.libWeights.WeightManager</a></div><div class="ttdoc">Class which manages the mass import/export of deformers. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00676">libWeights.py:676</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights_html_a50f415379c45029e28983047e3db12ca"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a50f415379c45029e28983047e3db12ca">PKD_Tools.libWeights.MultiWeights._target_deformers_</a></div><div class="ttdeci">_target_deformers_</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00376">libWeights.py:376</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager_html_ae789fa42069b319e4ff3cf16f9f7432a"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#ae789fa42069b319e4ff3cf16f9f7432a">PKD_Tools.libWeights.WeightManager._initialise_class_</a></div><div class="ttdeci">def _initialise_class_(self, geo)</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00746">libWeights.py:746</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a9c9adf7bab2e47e305981f6f5a76334a"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a9c9adf7bab2e47e305981f6f5a76334a">PKD_Tools.libWeights.Weights._file_</a></div><div class="ttdeci">_file_</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00094">libWeights.py:94</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a6b42d6ecd6d8bdc6444ccc700648b325"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a6b42d6ecd6d8bdc6444ccc700648b325">PKD_Tools.libWeights.Weights.datapath</a></div><div class="ttdeci">def datapath(self)</div><div class="ttdoc">File path to the xml file which contains data relevant to the deformer. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00220">libWeights.py:220</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_cluster_weight_manager_html"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_cluster_weight_manager.html">PKD_Tools.libWeights.ClusterWeightManager</a></div><div class="ttdoc">Class which manages the mass import/export of clusters. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00848">libWeights.py:848</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a857e0bedf85e65068a87b3b74c80968c"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a857e0bedf85e65068a87b3b74c80968c">PKD_Tools.libWeights.Weights.file</a></div><div class="ttdeci">file</div><div class="ttdoc">The file name which contains the individual weights&#39;&#39;&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00257">libWeights.py:257</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a54f6fef798a3cf6f2301add4ba824e3e"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a54f6fef798a3cf6f2301add4ba824e3e">PKD_Tools.libWeights.Weights.deformer</a></div><div class="ttdeci">deformer</div><div class="ttdoc">Which type of deformer is processed. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00246">libWeights.py:246</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_af06e93c0322719e3457a8c040147f0c1"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#af06e93c0322719e3457a8c040147f0c1">PKD_Tools.libWeights.Weights.export_weights</a></div><div class="ttdeci">def export_weights(self)</div><div class="ttdoc">Export out the weights. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00102">libWeights.py:102</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager_html_a121c9f55489fa17e416bca2442dcb3e5"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a121c9f55489fa17e416bca2442dcb3e5">PKD_Tools.libWeights.WeightManager.__init__</a></div><div class="ttdeci">def __init__(self)</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00687">libWeights.py:687</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights_html_a13ddcdaa3fe0e0dd48d125e4f5592c4c"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a13ddcdaa3fe0e0dd48d125e4f5592c4c">PKD_Tools.libWeights.MultiWeights.import_weights</a></div><div class="ttdeci">def import_weights(self)</div><div class="ttdoc">Import the previously exported weights. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00405">libWeights.py:405</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights_html_a0833cef952c0ccd988e1d19447548f83"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_multi_weights.html#a0833cef952c0ccd988e1d19447548f83">PKD_Tools.libWeights.MultiWeights._get_deformer_data_</a></div><div class="ttdeci">def _get_deformer_data_(self)</div><div class="ttdoc">To be defined in the subclasses. </div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00422">libWeights.py:422</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weights_html_a0c620c9cb00b752c8fa132aa99dfdd2e"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weights.html#a0c620c9cb00b752c8fa132aa99dfdd2e">PKD_Tools.libWeights.Weights.__init__</a></div><div class="ttdeci">def __init__(self)</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00090">libWeights.py:90</a></div></div>
<div class="ttc" id="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager_html_a4d1821fc4b22f80aa3b8bab6163e8d8b"><div class="ttname"><a href="class_p_k_d___tools_1_1lib_weights_1_1_weight_manager.html#a4d1821fc4b22f80aa3b8bab6163e8d8b">PKD_Tools.libWeights.WeightManager._xml_file_</a></div><div class="ttdeci">_xml_file_</div><div class="ttdef"><b>Definition:</b> <a href="lib_weights_8py_source.html#l00689">libWeights.py:689</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>libWeights.py</b></li>
    <li class="footer">Generated on Fri Sep 4 2015 00:46:03 for PKD_Tools by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
